"use strict";$(function(){var p=parseInt(JSON.parse(localStorage.getItem("token")));$.get("http://47.104.244.134:8080/cartlist.do",{token:p},function(c){for(var t="",n=0,e=c.length,a=0;a<c.length;a++)t+='\n                \n\n                <tr>\n                        <th class="cart-th-check"><input class="ck" type="checkbox" ></th>\n                        <th class="cart-th-item-info"> <img class="gwclimg" src="'+c[a].goods.picurl+'" /></th>\n                        <th class="cart-th-item-sku"> <span class="gwcname">'+c[a].goods.name+'</span></th>\n                        <th class="cart-th-item-price"> <span class="danprice">¥'+c[a].goods.price/100+'</span></th>\n                        <th class="cart-th-number">\n                                <input class="jian" type="button" value="-">\n                                <input class="inp" type="text" value="'+c[a].count+'">\n                                <input class="jia" type="button" value="+">\t\n                        </th>\n                        <th class="cart-th-subtotal"> <span class="danzong">'+(c[a].goods.price/100*c[a].count).toFixed(2)+'</span></th>\n                        <th class="cart-th-ops"> <input class="del" type="button" value="删除"></th>\n                    </tr>\n                     ',$(".u-yen-icon").text(c[a].goods.price/100*c[a].count),n+=c[a].goods.price/100*c[a].count;$(".centerSec").html(t),$(".zongjia").html(n),$(":checkbox").prop("checked",!0);var i=0;$(".inp").each(function(t){var n=$(this).val();i+=parseInt(n)});var o=0;function s(){for(var t=0,n=0;n<e;n++)$(".ck").eq(n).is(":checked")&&(t+=parseInt($(".danzong").eq(n).html()));$(".zongjia").html(t)}function l(t,n,c){$.get("http://47.104.244.134:8080/cartupdate.do",{id:t,gid:n,num:c,token:p})}$(".danzong").each(function(t){var n=$(this).text();o+=Number(n)}),$(".red").text(i),$(".u-yen-icon").text(o.toFixed(2)),$("#checkAll").click(function(){for(var t=0;t<e;t++)$("#checkAll").is(":checked")?$(".ck").eq(t).prop("checked",!0):$(".ck").eq(t).prop("checked",!1);s()}),$(".ck").click(function(){for(var t=0,n=0;n<e;n++)$(".ck").eq(n).is(":checked")&&t++;t!=e?$("#checkAll").prop("checked",!1):$("#checkAll").prop("checked",!0),s()});for(var r=function(n){$(".jian").eq(n).click(function(){$(".inp").eq(n).val()<=1?$(".inp").eq(n).val(1):($(".inp").eq(n).val(parseInt($(".inp").eq(n).val())-1),$(".danzong").eq(n).html(c[n].goods.price*$(".inp").eq(n).val()),l(c[n].id,c[n].gid,-1)),s(),history.go(0)}),$(".jia").eq(n).click(function(){$(".inp").eq(n).val(parseInt($(".inp").eq(n).val())+1),$(".danzong").eq(n).html(c[n].goods.price*$(".inp").eq(n).val()),l(c[n].id,c[n].gid,1),s(),history.go(0)}),$(".del").eq(n).click(function(){$(this).parent().remove(),l(c[n].id,c[n].gid,0),s(),history.go(0)}),$(".inp").eq(n).on("blur",function(){var t=parseInt($(this).val())-parseInt(c[n].count);""==$(this).val()||$(this).val()<1||/[^1-9]/g.test($(this).val())?$(this).val(1):$(this).val($(this).val()),$(".danzong").eq(n).html(c[n].goods.price*$(this).val()),l(c[n].id,c[n].gid,t),s(),history.go(0)})},h=0;h<e;h++)r(h);return!1})});